document.addEventListener("DOMContentLoaded",(async function(){const e=document.getElementById("calendar"),t=document.getElementById("toggleCalendarCard"),n=document.getElementById("calendarCard"),a=document.getElementById("toggleText"),r=document.getElementById("eventDetails"),o=document.getElementById("platformIcon"),d=document.getElementById("platformName"),i=document.getElementById("eventDescription"),s=new Date;const c=await async function(){try{const e=await fetch("/allEvents");if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return await e.json()}catch(e){return console.error("There has been a problem with your fetch operation:",e),[]}}();if(function(e,t){const n=e.getMonth()+1,a=e.getFullYear();return t.some((e=>{const[t,r]=e.date.split("-").map(Number);return t===a&&r===n}))}(s,c))t.addEventListener("click",(()=>{n.classList.toggle("hidden")?(t.classList.remove("bg-blue-800"),t.classList.add("bg-gray-800"),a.textContent="Mostrar Calendario",r.classList.add("hidden")):(t.classList.remove("bg-gray-800"),t.classList.add("bg-blue-800"),a.textContent="Ocultar Calendario")})),function t(n,a){const c=n.getMonth(),l=n.getFullYear();n.setDate(1);const u=n.getDay(),g=new Date(l,c+1,0).getDate(),y=new Date(l,c,0).getDate(),m=7-new Date(l,c+1,0).getDay()-1;e.innerHTML=`\n      <div class="flex justify-between items-center mb-4">\n        <button id="prevMonth" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-600">⬅</button>\n        <h2 class="text-2xl font-bold">${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][c]} ${l}</h2>\n        <button id="nextMonth" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-600">⮕</button>\n      </div>\n      <div class="grid grid-cols-7 gap-4 text-center text-gray-300">\n        <div>Dom</div>\n        <div>Lun</div>\n        <div>Mar</div>\n        <div>Mié</div>\n        <div>Jue</div>\n        <div>Vie</div>\n        <div>Sáb</div>\n      </div>\n      <div class="grid grid-cols-7 gap-4 text-center">\n        ${[...Array(u).keys()].map((e=>`<div class="text-gray-500 py-2">${y-u+1+e}</div>`)).join("")}\n        ${[...Array(g).keys()].map((e=>{const t=e+1,n=`${l}-${c+1<10?"0":""}${c+1}-${t<10?"0":""}${t}`,r=n===`${s.getFullYear()}-${s.getMonth()+1<10?"0":""}${s.getMonth()+1}-${s.getDate()<10?"0":""}${s.getDate()}`,o=a.find((e=>e.date===n)),d=o?function(e){switch(e){case"Twitch":return"bg-purple-500";case"YouTube":return"bg-red-600";case"Multistream":return"bg-gradient-to-r from-purple-500 to-green-600";default:return"bg-gray-800"}}(o.type):"bg-gray-800 text-white";return`\n              <div class="${r?"bg-cyan-500 text-white":d} py-2 rounded ${o?"border-2 cursor-pointer":""}" data-date="${n}">\n                ${t}\n              </div>\n            `})).join("")}\n        ${[...Array(m).keys()].map((e=>`<div class="text-gray-500 py-2">${e+1}</div>`)).join("")}\n      </div>\n    `,document.getElementById("prevMonth").addEventListener("click",(()=>{n.setMonth(n.getMonth()-1),t(new Date(n),a)})),document.getElementById("nextMonth").addEventListener("click",(()=>{n.setMonth(n.getMonth()+1),t(new Date(n),a)})),document.querySelectorAll("[data-date]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-date"),n=a.find((e=>e.date===t));n&&(r.classList.remove("hidden"),o.className=function(e){switch(e){case"Twitch":return"fab fa-twitch";case"YouTube":return"fab fa-youtube";case"Multistream":return"fa-solid fa-broadcast-tower";default:return"fa-solid fa-calendar"}}(n.type)+" mr-3 text-gray-300",d.textContent=n.type,i.textContent=`${n.description} el ${function(e){const[t,n,a]=e.split("-");return`${a}/${n}/${t}`}(n.date)} a las ${n.time}`)}))}))}(new Date(s),c);else{document.getElementById("calendarSectionId").style.display="none"}}));