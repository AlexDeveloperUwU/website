document.addEventListener("DOMContentLoaded",(function(){const e=3,t=6e4;let n,s;async function a(){try{const t=await fetch("/json/sites.json"),n=await t.json(),s=document.getElementById("status-container");n.forEach((t=>{let n=document.getElementById(t.statusElement);if(!n){const e=document.createElement("div");e.className="block rounded-lg bg-gray-800 p-6",e.innerHTML=`\n                      <div class="flex items-center">\n                        <i class="fas fa-globe mr-3 text-gray-300"></i>\n                        <div>\n                          <p class="font-bold text-gray-100">${t.name}</p>\n                          <p id="${t.statusElement}" class="text-gray-300 font-agrandir">Verificando estado...</p>\n                        </div>\n                      </div>\n                    `,s.appendChild(e),n=document.getElementById(t.statusElement)}!async function(e,t){for(;t>0;)try{const t=Date.now();await fetch(e.url,{mode:"no-cors"});const n=Date.now()-t,s=document.getElementById(e.statusElement);return s.innerHTML=`Estado: Operativo. Ping: ${n} ms.`,s.classList.add("text-green-500"),void s.classList.remove("text-red-500")}catch{--t>0&&await new Promise((e=>setTimeout(e,1e3)))}const n=document.getElementById(e.statusElement);n.innerHTML="Estado: Offline. No se pudo establecer conexi√≥n.",n.classList.add("text-red-500"),n.classList.remove("text-green-500")}(t,e)}))}catch(e){console.error("Error loading the sites:",e),window.location.href="/error?code=500"}}async function o(){try{const e=await fetch("/serverStats"),t=await e.json(),n=document.getElementById("server-status-container");for(const[e,s]of Object.entries(t)){let t=document.getElementById(e);const a=`\n            <span class="text-green-500">CPU: ${s.CPU}%</span> |\n            <span class="text-green-500">RAM: ${s.RAM}%</span> |\n            <span class="text-green-500">Disco: ${s.Disk}%</span>\n          `;if(t)t.innerHTML=a;else{const t=document.createElement("div");t.className="block rounded-lg bg-gray-800 p-6",t.innerHTML=`\n              <div class="flex items-center">\n                <i class="fas fa-server mr-3 text-gray-300"></i>\n                <div>\n                  <p class="font-bold text-gray-100">${e}</p>\n                  <p id="${e}" class="font-agrandir">\n                    ${a}\n                  </p>\n                </div>\n              </div>\n            `,n.appendChild(t)}}}catch(e){console.error("Error loading server stats:",e)}}function r(){n=setInterval(a,t),s=setInterval(o,t)}function c(){clearInterval(n),clearInterval(s)}document.addEventListener("visibilitychange",(function(){document.hidden?c():r()})),window.addEventListener("pagehide",c),window.addEventListener("pageshow",r),o(),a(),r()}));